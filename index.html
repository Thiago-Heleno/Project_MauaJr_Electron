<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Electron App with Pages</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #141a23; /* Dark background */
        color: #ffffff; /* White text color */
      }

      .navbar {
        display: flex;
        justify-content: flex-start;
        /* background-color: #1f2630; */
        padding: 10px;
      }

      .navbar button {
        display: flex;
        justify-content: center;
        justify-items: center;
        align-items: center;
        font-size: 14px;
        padding: 10px 20px;
        color: white;
        background-color: #141a23;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        margin-right: 10px;
      }

      .navbar button:hover {
        background-color: #3a4756;
      }

      .container {
        padding: 20px;
        margin-left: 10%;
        margin-right: 10%;
      }

      h1 {
        text-align: center;
        color: #ffffff;
      }

      .page {
        display: none;
      }

      .active {
        display: block;
      }

      input[type="text"] {
        font-size: 16px;
        padding: 12px;
        margin-bottom: 15px;
        border-radius: 25px;
        border: none;
        width: 100%;
        background-color: #2d3440;
        color: #ffffff;
      }

      input[type="text"]::placeholder {
        color: #888888;
      }

      input[type="text"]:focus {
        outline: none;
        border: 1px solid #007bff;
      }

      .submit-button {
        background-color: #007bff;
        color: white;
        font-size: 16px;
        padding: 12px;
        margin-top: 15px;
        border-radius: 25px;
        border: none;
        cursor: pointer;
        width: 100%;
      }

      .submit-button:hover {
        background-color: #0056b3;
      }

      .search-result {
        font-size: 14px;
        text-align: center;
        margin: 10px;
        color: #ffffff;
      }

      .client-card {
        border-radius: 25px;
        border: none;
        padding: 20px;
        background-color: #1f2630;
        margin: 0;
        margin-top: 15px;
        color: white;
      }

      .client-card p {
        margin: 0;
      }

      .search-container {
        display: flex;
        flex-direction: row;
        align-items: center;
        position: relative;
        margin: 0 auto;
        border-radius: 25px;
        border: none;
        background-color: #2d3440;
        padding: 6px;
      }

      .search-container input[type="text"] {
        margin: 0;
        background-color: transparent;
        border: none;
      }

      .search-container button {
        border: none;
        background: transparent;
        cursor: pointer;
      }

      .search-container button img {
        width: 20px;
        height: 20px;
      }

      .home-icon {
        cursor: pointer;
        width: 25px;
        height: 25px;
      }
      *,
      *::before,
      *::after {
        box-sizing: border-box; /* Ensure padding and border do not add to width */
      }
    </style>
  </head>
  <body>
    <div class="navbar">
      <button id="searchButton">
        <img src="assets/home.svg" class="home-icon" alt="Home" />
      </button>
    </div>
    <div class="container">
      <!-- Search Page -->
      <div id="searchPage" class="page active">
        <h1>Buscar por cliente</h1>
        <div class="search-container">
          <input
            type="text"
            id="searchInput"
            placeholder="Insira o nome do cliente..."
          />
          <button>
            <img src="assets/magnifier.svg" alt="Search" />
          </button>
        </div>
        <div class="search-result">
          <span id="searchResult"></span>
        </div>
        <button class="submit-button" id="newClientButton">
          Adicionar novo cliente
        </button>
      </div>

      <!-- Create Page -->
      <div id="createPage" class="page">
        <h1>Gerar novo relatorio</h1>
        <form id="createForm">
          <input type="text" placeholder="Nome" required />
          <input type="text" placeholder="CNPJ" required />
          <input type="text" placeholder="Razão Social" required />
          <input type="text" placeholder="Endereço" required />
          <input
            type="text"
            placeholder="Responsável Técnico do Cliente"
            required
          />
          <input
            type="text"
            placeholder="Assistente Técnico do Cliente"
            required
          />

          <input type="text" placeholder="Número do Relatório" required />
          <input type="text" placeholder="Nome do Equipamento" required />
          <input type="text" placeholder="Tag do Equipamento" required />
          <input type="text" placeholder="Data Final do Ensaio" required />

          <!-- Quantidade de DLPS -->
          <input
            type="text"
            placeholder="Quantidade de DLPS (ex: 3)"
            required
          />

          <!-- Fabricante do Equipamento -->
          <input
            type="text"
            placeholder="Fabricante do Equipamento (ex: Geladeiras S.A.)"
            required
          />

          <!-- Modelo do Equipamento -->
          <input
            type="text"
            placeholder="Modelo do Equipamento (ex: Geladeira Top)"
            required
          />

          <!-- Número de Série do Equipamento -->
          <input
            type="text"
            placeholder="Número de Série do Equipamento (ex: 123456)"
            required
          />

          <!-- Local de Instalação do Equipamento -->
          <input
            type="text"
            placeholder="Local de Instalação do Equipamento (ex: Cozinha)"
            required
          />

          <!-- Tipo de Porta do Equipamento -->
          <input
            type="text"
            placeholder="Tipo de Porta do Equipamento (ex: Porta Dupla)"
            required
          />

          <!-- Faixa de Uso do Equipamento -->
          <input
            type="text"
            placeholder="Faixa de Uso do Equipamento (ex: 0 a 10°C)"
            required
          />

          <!-- Controlador de Temperatura do Equipamento -->
          <input
            type="text"
            placeholder="Controlador de Temperatura do Equipamento (ex: Digital)"
            required
          />

          <!-- Setpoint do Equipamento -->
          <input
            type="text"
            placeholder="Setpoint do Equipamento (ex: 4°C)"
            required
          />

          <!-- Unidade de Medida -->
          <input
            type="text"
            placeholder="Unidade de Medida (ex: Metros)"
            required
          />

          <!-- Altura -->
          <input type="text" placeholder="Altura (ex: 1.5)" required />

          <!-- Largura -->
          <input type="text" placeholder="Largura (ex: 0.5)" required />

          <!-- Profundidade -->
          <input type="text" placeholder="Profundidade (ex: 0.6)" required />

          <!-- Data de Início do Ensaio -->
          <input
            type="text"
            placeholder="Data de Início do Ensaio (ex: 15/09/2024)"
            required
          />

          <!-- Data Final do Ensaio -->
          <input
            type="text"
            placeholder="Data Final do Ensaio (ex: 17/09/2024)"
            required
          />

          <!-- Condição Visual do Equipamento -->
          <input
            type="text"
            placeholder="Condição Visual do Equipamento (ex: Boa, Ruim, Péssima)"
            required
          />

          <!-- Irregularidade -->
          <input
            type="text"
            placeholder="Irregularidade (ex: Sim ou Não)"
            required
          />

          <!-- Irregularidade - Motivo -->
          <input
            type="text"
            placeholder="Motivo da Irregularidade (ex: Porta quebrada)"
            required
          />

          <!-- Sistema Elétrico Perfeito -->
          <input
            type="text"
            placeholder="Sistema Elétrico Perfeito (ex: Sim ou Não)"
            required
          />

          <!-- Tensão Utilizada -->
          <input
            type="text"
            placeholder="Tensão Utilizada (ex: 127 V, 220 V, 340 V)"
            required
          />

          <!-- Borracha de Vedação Perfeita -->
          <input
            type="text"
            placeholder="Borracha de Vedação Perfeita (ex: Sim ou Não)"
            required
          />

          <!-- Borracha de Vedação - Motivo -->
          <input
            type="text"
            placeholder="Motivo da Borracha de Vedação Imperfeita (ex: Rasgada)"
            required
          />

          <!-- Local pode Interferir -->
          <input
            type="text"
            placeholder="Local pode Interferir (ex: Sim ou Não)"
            required
          />

          <!-- Local pode Interferir - Motivo -->
          <input
            type="text"
            placeholder="Motivo de Interferência no Local (ex: Muito quente)"
            required
          />

          <!-- Ar Condicionado -->
          <input
            type="text"
            placeholder="Ar Condicionado (ex: Sim ou Não)"
            required
          />

          <!-- Ar Condicionado Influência -->
          <input
            type="text"
            placeholder="Ar Condicionado Influência (ex: Sim ou Não)"
            required
          />

          <!-- Ar Condicionado Influência - Motivo -->
          <input
            type="text"
            placeholder="Motivo da Influência do Ar Condicionado"
            required
          />

          <p>Dataloggers:</p>
          <div
            style="
              display: flex;
              flex-direction: row;
              align-items: center;
              padding: 10px;
              font-size: 16px;
              padding: 12px;
              margin-bottom: 15px;
              border-radius: 25px;
              border: none;
              width: 100%;
              background-color: #2d3440;
              color: #ffffff;
            "
          >
            <label for="documentCount"
              >Quantos documentos deseja adicionar?</label
            >
            <input type="number" id="documentCount" min="1" value="1" />
            <button class="submit-button" type="button" id="renderUploadButton">
              Adicionar
            </button>
          </div>

          <div id="fileUploadContainer2"></div>
          <button type="submit" class="submit-button">
            Gerar novo Relatório
          </button>
        </form>
      </div>

      <!-- New Client Page -->
      <div id="newClientPage" class="page">
        <h1>Adicionar novo cliente</h1>
        <form id="newClientForm">
          <input type="text" placeholder="Nome" required />
          <input type="text" placeholder="CNPJ" required />
          <input type="text" placeholder="Razão Social" required />
          <input type="text" placeholder="Endereço" required />
          <input
            type="text"
            placeholder="Responsável Técnico do Cliente"
            required
          />
          <input
            type="text"
            placeholder="Assistente Técnico do Cliente"
            required
          />
          <button type="submit" class="submit-button">
            Adicionar novo Cliente
          </button>
        </form>
      </div>
    </div>

    <script type="module">
      import { createFileUploadComponent } from "./components/file-upload.js";

      document.addEventListener("DOMContentLoaded", () => {
        const searchButton = document.getElementById("searchButton");
        const newClientButton = document.getElementById("newClientButton");

        const searchPage = document.getElementById("searchPage");
        const createPage = document.getElementById("createPage");
        const newClientPage = document.getElementById("newClientPage");

        function createCard(name, CNPJ, index) {
          // HTML string for the card
          const cardHTML = `
            <div class="search-result client-card">
              <p>Nome: ${name}</p>
              <p>CNPJ: ${CNPJ}</p>
              <span style="visibility: hidden">{name: ${name}}</span>
              <button class="submit-button" id="createButton-${index}">Gerar relatório</button>
            </div>
          `;

          // Select the container where the card should be added
          const container = document.querySelector(".search-result");

          // Append the card to the container using insertAdjacentHTML
          container.insertAdjacentHTML("beforeend", cardHTML);

          // Attach the event listener to the newly created button
          const createButton = document.getElementById(`createButton-${index}`);
          createButton.addEventListener("click", () => {
            console.log(name);
            showPage(createPage);
          });
        }

        // Handle navigation
        searchButton.addEventListener("click", () => showPage(searchPage));
        newClientButton.addEventListener("click", () =>
          showPage(newClientPage)
        );

        function showPage(page) {
          [searchPage, createPage, newClientPage].forEach((p) =>
            p.classList.remove("active")
          );
          page.classList.add("active");
        }

        // Search page functionality
        async function searchApiUser() {
          try {
            const response = await fetch(
              "https://your-api-endpoint.com/api/users",
              {
                method: "GET",
                headers: { "Content-Type": "application/json" },
              }
            );

            if (response.ok) {
              const result = await response.json();
            } else {
              console.error("Error:", response.statusText);
            }
          } catch (error) {
            console.error("Error:", error);
          }
        }
        const searchInput = document.getElementById("searchInput");
        const searchResult = document.getElementById("searchResult");
        const searchResultDiv = document.querySelector(".search-result");
        searchResultDiv.hidden = true;
        searchInput.addEventListener("input", () => {
          createCard("Deco", "123.456.789", 1);
          createCard("ACME Corp", "987.654.321", 2);
          createCard("XYZ Inc", "456.789.123", 3);
          searchResultDiv.hidden = false;
          searchResult.innerText = `Resultado para: ${searchInput.value}`;
        });

        const newClientForm = document.getElementById("newClientForm");
        newClientForm.addEventListener("submit", handleNewClientSubmit);

        async function handleNewClientSubmit(event) {
          event.preventDefault();
          const formData = new FormData(newClientForm);
          const data = Object.fromEntries(formData);

          try {
            const response = await fetch(
              "https://your-api-endpoint.com/api/create",
              {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data),
              }
            );

            if (response.ok) {
              const result = await response.json();
              console.log("Success:", result);
              newClientForm.reset();
            } else {
              console.error("Error:", response.statusText);
            }
          } catch (error) {
            console.error("Error:", error);
          }
        }

        // File upload functionality
        const apiUrl = "https://your-api-endpoint.com/api/upload"; // Replace with your actual API endpoint
        const fileUploadContainer = document.getElementById(
          "fileUploadContainer"
        );

        const renderUploadButton =
          document.getElementById("renderUploadButton");
        const documentCountInput = document.getElementById("documentCount");
        const fileUploadContainer2 = document.getElementById(
          "fileUploadContainer2"
        );

        renderUploadButton.addEventListener("click", () => {
          fileUploadContainer2.innerHTML = ""; // Clear previous uploads
          const count = parseInt(documentCountInput.value) || 1;

          for (let i = 0; i < count; i++) {
            const fileUploadComponent = createFileUploadComponent(apiUrl);
            fileUploadContainer2.appendChild(fileUploadComponent);
          }
        });
      });
    </script>
  </body>
</html>
