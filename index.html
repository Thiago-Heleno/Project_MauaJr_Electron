<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Electron App with Pages</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #141a23; /* Dark background */
        color: #ffffff; /* White text color */
      }

      .navbar {
        display: flex;
        justify-content: flex-start;
        /* background-color: #1f2630; */
        padding: 10px;
      }

      .navbar button {
        display: flex;
        justify-content: center;
        justify-items: center;
        align-items: center;
        font-size: 14px;
        padding: 10px 20px;
        color: white;
        background-color: #141a23;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-right: 10px;
      }

      .navbar button:hover {
        background-color: #3a4756;
      }

      .container {
        padding: 20px;
        margin-left: 10%;
        margin-right: 10%;
      }

      h1 {
        text-align: center;
        color: #ffffff;
      }

      .page {
        display: none;
      }

      .active {
        display: block;
      }

      input[type="text"] {
        font-size: 16px;
        padding: 12px;
        margin-bottom: 15px;
        border-radius: 25px;
        border: none;
        width: 100%;
        background-color: #2d3440;
        color: #ffffff;
      }

      input[type="text"]::placeholder {
        color: #888888;
      }

      input[type="text"]:focus {
        outline: none;
        border: 1px solid #007bff;
      }

      .submit-button {
        background-color: #007bff;
        color: white;
        font-size: 16px;
        padding: 12px;
        margin-top: 10px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        width: 100%;
      }

      .submit-button:hover {
        background-color: #0056b3;
      }

      .search-result {
        font-size: 14px;
        text-align: center;
        margin: 10px;
        color: #ffffff;
      }

      .client-card {
        border-radius: 8px;
        border: none;
        padding: 20px;
        background-color: #1f2630;
        margin-top: 15px;
        color: white;
      }

      .client-card p {
        margin: 0;
      }

      .search-container {
        display: flex;
        flex-direction: row;
        align-items: center;
        position: relative;
        margin: 0 auto;
      }

      .search-container input[type="text"] {
        padding-right: 50px;
      }

      .search-container button {
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
        border: none;
        background: transparent;
        cursor: pointer;
      }

      .search-container button img {
        width: 20px;
        height: 20px;
      }

      .home-icon {
        cursor: pointer;
        width: 25px;
        height: 25px;
      }
      *,
      *::before,
      *::after {
        box-sizing: border-box; /* Ensure padding and border do not add to width */
      }
    </style>
  </head>
  <body>
    <div class="navbar">
      <button id="searchButton">
        <img src="assets/home.svg" class="home-icon" alt="Home" />
      </button>
    </div>
    <div class="container">
      <!-- Search Page -->
      <div id="searchPage" class="page active">
        <h1>Buscar por cliente</h1>
        <div class="search-container">
          <input
            type="text"
            id="searchInput"
            placeholder="Insira o nome do cliente..."
          />
          <button>
            <img src="assets/magnifier.svg" alt="Search" />
          </button>
        </div>
        <div class="search-result" id="searchResult"></div>
        <button class="submit-button" id="newClientButton">
          Adicionar novo cliente
        </button>
        <div id="fileUploadContainer"></div>
        <div class="search-result client-card" id="clientCard">
          <p>Client: DECO</p>
          <p>ID: 123</p>
          <span style="visibility: hidden">{name: "Deco"}</span>
          <button class="submit-button" id="createButton">
            Gerar relatorio
          </button>
        </div>
      </div>

      <!-- Create Page -->
      <div id="createPage" class="page">
        <h1>Gerar novo relatorio</h1>
        <form id="createForm">
          <input type="text" placeholder="Field 1" required />
          <input type="text" placeholder="Field 2" required />
          <input type="text" placeholder="Field 3" required />
          <input type="text" placeholder="Field 4" required />
          <input type="text" placeholder="Field 5" required />

          <div
            style="
              display: flex;
              flex-direction: row;
              align-items: center;
              padding: 10px;
              font-size: 16px;
              padding: 12px;
              margin-bottom: 15px;
              border-radius: 25px;
              border: none;
              width: 100%;
              background-color: #2d3440;
              color: #ffffff;
            "
          >
            <label for="documentCount"
              >Quantos documentos deseja adicionar?</label
            >
            <input type="number" id="documentCount" min="1" value="1" />
            <button class="submit-button" type="button" id="renderUploadButton">
              Adicionar
            </button>
          </div>

          <div id="fileUploadContainer2"></div>
          <button type="submit" class="submit-button">Submit</button>
        </form>
      </div>

      <!-- New Client Page -->
      <div id="newClientPage" class="page">
        <h1>Adicionar novo cliente</h1>
        <form id="newClientForm">
          <input type="text" placeholder="Field 1" required />
          <input type="text" placeholder="Field 2" required />
          <input type="text" placeholder="Field 3" required />
          <input type="text" placeholder="Field 4" required />
          <input type="text" placeholder="Field 5" required />
          <button type="submit" class="submit-button">Submit</button>
        </form>
      </div>
    </div>

    <script type="module">
      import { createFileUploadComponent } from "./components/file-upload.js";

      document.addEventListener("DOMContentLoaded", () => {
        const searchButton = document.getElementById("searchButton");
        const createButton = document.getElementById("createButton");
        const newClientButton = document.getElementById("newClientButton");

        const searchPage = document.getElementById("searchPage");
        const createPage = document.getElementById("createPage");
        const newClientPage = document.getElementById("newClientPage");

        // Handle navigation
        searchButton.addEventListener("click", () => showPage(searchPage));
        createButton.addEventListener("click", () => showPage(createPage));
        newClientButton.addEventListener("click", () =>
          showPage(newClientPage)
        );

        function showPage(page) {
          [searchPage, createPage, newClientPage].forEach((p) =>
            p.classList.remove("active")
          );
          page.classList.add("active");
        }

        // Search page functionality
        const searchInput = document.getElementById("searchInput");
        const searchResult = document.getElementById("searchResult");

        searchInput.addEventListener("input", () => {
          searchResult.innerText = `Resultado para: ${searchInput.value}`;
        });

        const newClientForm = document.getElementById("newClientForm");
        newClientForm.addEventListener("submit", handleNewClientSubmit);

        async function handleNewClientSubmit(event) {
          event.preventDefault();
          const formData = new FormData(newClientForm);
          const data = Object.fromEntries(formData);

          try {
            const response = await fetch(
              "https://your-api-endpoint.com/api/create",
              {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data),
              }
            );

            if (response.ok) {
              const result = await response.json();
              console.log("Success:", result);
              newClientForm.reset();
            } else {
              console.error("Error:", response.statusText);
            }
          } catch (error) {
            console.error("Error:", error);
          }
        }

        // File upload functionality
        const apiUrl = "https://your-api-endpoint.com/api/upload"; // Replace with your actual API endpoint
        const fileUploadContainer = document.getElementById(
          "fileUploadContainer"
        );
        const fileUploadComponent = createFileUploadComponent(apiUrl);
        fileUploadContainer.appendChild(fileUploadComponent);

        const renderUploadButton =
          document.getElementById("renderUploadButton");
        const documentCountInput = document.getElementById("documentCount");
        const fileUploadContainer2 = document.getElementById(
          "fileUploadContainer2"
        );

        renderUploadButton.addEventListener("click", () => {
          fileUploadContainer2.innerHTML = ""; // Clear previous uploads
          const count = parseInt(documentCountInput.value) || 1;

          for (let i = 0; i < count; i++) {
            const fileUploadComponent = createFileUploadComponent(apiUrl);
            fileUploadContainer2.appendChild(fileUploadComponent);
          }
        });
      });
    </script>
  </body>
</html>
